---
title: Abusing the GitHub URL Shortener
author: Jacob Strieb
date: November 22, 2020
description: GitHub has a link shortener that only works for GitHub domains, but this can be circumvented by using URL Pages and JavaScript redirects.
...


# Abusing the GitHub URL Shortener

By [Jacob Strieb](https://jstrieb.github.io)

Published on [November 23, 2020](/posts/git-io/)

---

## Edit (January 11, 2022)

As of today, GitHub is no longer accepting new URLs at git.io. That means that
this article is no longer relevant, and the code featured below probably won't
work. For more, read their blog post here:

<https://github.blog/changelog/2022-01-11-git-io-no-longer-accepts-new-urls/>

---

Since creating [URL Pages](https://github.com/jstrieb/urlpages), I have been
looking for a URL shortener that does not limit the length of submitted links,
since those generated by URL Pages can be obscenely long. Even the most
generous shortening services I have discovered limit the URL size to between
2,000 and 5,000 bytes. Recently, however, a user on GitHub pointed out the
existence of a GitHub-exclusive link
shortener.^[<https://github.com/jstrieb/link-lock/issues/2>]
Released in
2011,^[<https://github.blog/2011-11-10-git-io-github-url-shortener/>] the
service lives at [git.io](https://git.io). Excitingly, some testing revealed
that it does not seem to have a length limit on submitted URLs!

Despite being very useful for reducing the size of long URL Pages links, git.io
is unusable for pages that are not on a GitHub domain. But by using URL Pages
and JavaScript's `window.location.replace` function, we can work around this!

The form below will fill the given URL into the following HTML template,
generate a URL Pages link for it, and then retrieve the `git.io` shortened
link. This will use JavaScript to redirect to the original URL entered by the
user. We can now shorten URLs from any domain---of any length---using the
GitHub link shortener!

``` html
<html>
<script>
window.location.replace("{{ INPUT URL }}")
</script>
</html>
```

\

---

\

<script src="//jstrieb.github.io/urlpages/b64.js"></script>
<script src="//jstrieb.github.io/urlpages/api.js"></script>

<form class="contact-form" onsubmit="shorten(this); return false;"
method="post">
  <label for="orig_url">URL to shorten:</label>
  <input name="orig_url" type="text" />
  <input name="url" type="hidden" />
  <label for="url">Custom alias (optional):</label>
  <input name="code" type="text" />
  <a id="alert" class="alert"></a><br /><br />
  <button>Submit</button>
</form>

<script>
let api = apiVersions[LATEST_API_VERSION];

function error(message) {
  const alert = document.querySelector("#alert");
  alert.innerText = message;
  try {
    new URL(message);
    alert.href = message;
  } catch (err) {
    alert.href = "";
  }
  alert.style.opacity = 1;
}

function shorten(form) {
  let orig_url = form.elements['orig_url'].value;
  try {
    new URL(orig_url);
  } catch (err) {
    error("Bad URL");
    return;
  }

  let pageData = `
<html>
<scr` + `ipt>
window.location.replace("${orig_url}")
</scr` + `ipt>
</html>
`;
  let url = api.getViewLink(pageData);
  console.log(url);
  let formData = new FormData(form);
  formData.delete("orig_url");
  if (!formData.get("code")) formData.delete("code");
  formData.set("url", url);
  // fetch("https://git.io/", {
  fetch("https://cors.jstrieb.workers.dev/https://git.io/", {
    "body": formData,
    "method": "POST"
  })
  .then(r => {
    if (r.status >= 400)
      return error("Error! Possibly, the alias is already in use!");
    r.headers.forEach(console.log)
    let short = r.headers.get("location");
    console.log(r);
    console.log(short);
    console.log(r.headers);
    error(short);
    // setTimeout(() => alert.style.opacity = 0, 5000);
  })
  .catch(error);
}
</script>
